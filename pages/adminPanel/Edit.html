<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="../../Assets/img/Logo.png" type="image/png">
    <link rel="stylesheet" href="../../Assets/style.css">
    <link rel="stylesheet" href="adminstyle.css">
    <title>Admin Section | Add post </title>
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="row align-items-center justify-content-between">
               <div class="logo">
                 <a href="#"><img src="../../Assets/img/Logo.png" alt=""></a>
               </div>
               <input type="checkbox" id="nav-check">
               <label for="nav-check" class="nav-toggler">
                  <span></span>
               </label>
               <nav class="nav">
                  <ul>
                        <div class="drop">
                            <li><i class="fa-solid fa-user"></i>
                            <span class="user_name">Abdoul Khaliq</span>
                            <div class="dropdown">
                                <i class="fa-sharp fa-solid fa-caret-down"></i>
                            <div class="dropdown-content">
                                <a href="./Profile/profile.html">Profile</a>
                                <a href="../../index.html">Logout</a>
                            </div>
                            </div>
                        </div>
                    </li>
                  </ul>
               </nav>
            </div>
        </div>
     </header>     
        <!-- PAGE WRAPPER -->
        <div class="admin-wrapper">
            <!-- Left side bar -->
            <div class="left-sidebar">
                <ul>
                    <li><a href="index.html">Manage Blog</a></li>
                    <li><a href="./Message/index.html">Message</a></li>
                    <li><a href="./Project/project.html">Manage Project</a></li>
                    <li><a href="./user/user.html">Manage User</a></li>
                </ul>
            </div>
            <!-- Admin content -->
            <div class="admin-content">
                <div class="button-group">
                    <a href="create.html" class="btn btn-big">Add post</a> 
                    <a href="index.html" class="btn btn-big">Manage</a> 
                </div>
                <div class="contents">
                    <h2 class="page-title">Edit posts</h2>
                    <div id="form">

                    </div>
                </div>
            </div>
        </div>
        <script>
                let index=localStorage.getItem('blogDataIndex');
                let blogData=JSON.parse(localStorage.getItem('blogData'));
                    let editForm=`
                    <form action="create.html" method="post">
                        <div>
                            <label for="Title">Title</label>
                            <input type="text" name="title" id="newblog_title" class="text-input" value="${blogData[index].blogTitle}">
                        </div>
                        <div>
                            <label for="Title">Date</label>
                            <input type="Date" name="title" id="newblog_Date" class="text-input" value="">
                        </div>
                        <div>
                            <label for="">Topic</label>
                            <select name="topic" id="Newselection" class="text-input">
                                <option value="Poetry" >Web Design</option>
                                <option value="Life Lesson">Life Lesson</option>
                                <option value="Poetry">Inspiration</option>
                            </select>
                        </div>
                        <div>
                            <label for="Title">Description</label>
                            <textarea name="body" id="newbody" class="blogDescription" rows="10" cols="78" value="${blogData[index].blogDescription}"></textarea>
                        </div>
                        <div>
                            <label for="Title">Upload Picture</label>
                            <input type="file" name="title" id="newblog_picture" class="text-input" value="${blogData[index].blogPicture}">
                        </div>
                        <div>
                            <button type="button" class="btn btn-big" onclick="update(${index})"> Update Post</button>
                        </div>
                    </form>`;
                    document.getElementById('form').innerHTML=editForm;
                function update(index)
                {
                    let newblog_title= document.getElementById('newblog_title');
                    let newblogDescription=document.getElementById('newbody');
                    // let newBlogType=document.getElementById('newselection').value;
                    let newDate=document.getElementById('newblog_date');
                    var newDateEntered= new Date(newDate);
                    var newBlogPicture=document.getElementById('newblog_picture').files[0].name;
                    console.log(newBlogPicture)
                    var options={
                        year:'numeric',
                        month:'2-digit',
                        day:'2-digit'
                    }
                    var newBlogDate=newDateEntered.toLocaleDateString('en-US',options);
                    blogData[index]={
                        blogTitle: newblog_title.value,
                        blogDate:newBlogDate,
                        blogPicture:newBlogPicture
                    }
                    localStorage.setItem("blogData",JSON.stringify(blogData));
                    console.log(blogData)
                    alert("Your data updated Successfully");
                    window.location.href="index.html";
                }
        </script>
        </body>
        </html>            